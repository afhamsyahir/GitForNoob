<div class="min-h-screen">
  <!-- Loading Screen -->
  @if (isLoading()) {
  <div class="fixed inset-0 z-[60] flex items-center justify-center bg-white dark:bg-zinc-950">
    <div class="flex flex-col items-center gap-4">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="w-16 h-16 text-zinc-700 dark:text-zinc-300 bird-loading"
      >
        <path d="M16 7h.01" />
        <path d="M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20" />
        <path d="m20 7 2 .5-2 .5" />
        <path d="M10 18v3" />
        <path d="M14 17.75V21" />
        <path d="M7 18a6 6 0 0 0 3.84-10.61" />
      </svg>
      <p class="text-sm text-zinc-500 dark:text-zinc-400 animate-pulse">Loading...</p>
    </div>
  </div>
  } @else {
  <!-- Header -->
  <app-header
    [isMobileMenuOpen]="isMobileMenuOpen()"
    (toggleMenu)="toggleMobileMenu()"
  ></app-header>
  }

  <!-- Mobile Sidebar Overlay -->
  <div
    class="fixed top-14 left-0 right-0 bottom-0 z-30 bg-black/50 backdrop-blur-sm lg:hidden"
    [@fadeInOut]="isMobileMenuOpen() ? 'visible' : 'hidden'"
    (click)="closeMobileMenu()"
  ></div>

  <div class="flex">
    <!-- Desktop Sidebar -->
    <aside
      class="hidden lg:block sticky top-14 h-[calc(100vh-3rem)] w-72 flex-shrink-0 overflow-y-auto py-8 px-6"
    >
      <app-sidebar [items]="contentData()" [activeId]="activeId()"></app-sidebar>
    </aside>

    <!-- Mobile Sidebar Drawer -->
    <aside
      class="fixed top-14 left-0 z-40 h-[calc(100vh-3.5rem)] w-80 bg-white dark:bg-zinc-950 shadow-2xl overflow-y-auto py-8 px-6 lg:hidden"
      [@slideInOut]="isMobileMenuOpen() ? 'open' : 'closed'"
    >
      <app-sidebar
        [items]="contentData()"
        [activeId]="activeId()"
        (navigate)="closeMobileMenu()"
      ></app-sidebar>
    </aside>

    <!-- Main Content -->
    <main
      class="flex-1 overflow-x-hidden"
      appSectionObserver
      [sectionIds]="sectionIds()"
      (activeId)="onActiveId($event)"
    >
      <div class="mx-auto w-full max-w-4xl px-4 py-8 sm:px-8 lg:px-16">
        <app-content [items]="contentData()" (sectionIds)="onSectionIds($event)"></app-content>
      </div>

      <!-- Footer -->
      <app-footer></app-footer>
    </main>
  </div>
</div>
